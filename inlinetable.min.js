!function(t){t.fn.inlineTable=function(a){var e=t.extend({defaultDiv:t(this).attr("id"),defaultClass:"table",defaulClassTh:"inline-th",defaultClassTd:"inline-td",scopeTh:"col",scopeTr:"row",data:"",language:"pt-BR",theme:"",retDel:"",retIns:"",selectValues:new Object,selectData:"",tableData:new Object,onDelete:function(t){},onInsert:function(t){},onEdit:function(t){}},a),n='<table class="table '+("dark"==e.theme?"table-dark":"")+'"><thead class="inline-head"><tr>',s=0,i=0,l=0,o=0,d="",r=1,c=e.tabHeader.length,p="pt-BR"==e.language?"Ação":"Action";return n+='<th class="inline-th" scope="'+e.scopeTh+'">'+p+"</th>",t.each(e.tabHeader,function(){"select"==e.tabHeader[s].type&&(e.selectValues[e.tabHeader[s].columnName]=e.tabHeader[s].selectData),n+='<th class="inline-th" scope="'+e.scopeTh+'" id="'+e.tabHeader[s].columnName+'">'+e.tabHeader[s].columnTitle+"</th>",s++}),n+='<th class="inline-th" scope="'+e.scopeTh+'">'+p+"</th>",n+="</tr>",e.data&&t.each(e.data,function(){n+='<tr class="inline-edit" scope="'+e.scopeTr+'">',n+="<td>",n+=' <button type="button" class="btn btn-success btn-sm add-row"><span style="font-size: 1rem;"><span style="color: white;"><i class="fas fa-plus"></i></span></button>',n+='    <button type="button" class="btn btn-primary btn-sm edit-row"><span style="color: white;"><i class="fas fa-edit"></i></span></span></button> ',n+='    <button type="button" class="btn btn-danger btn-sm delete-row"><span style="color: white;"><i class="fas fa-trash-alt"></i></span></span></button>',n+="</td>",t.each(e.tabHeader,function(){d=e.tabHeader[l].columnName,n+='<td class="inline-inp" data-change="N" data-action="U" data-inpType="'+e.tabHeader[l].type+'" data-colname="'+d+'" data-title="'+e.tabHeader[l].columnTitle+'" data-mandatory="'+(1==e.tabHeader[l].mandatory?"S":"N")+'" data-value="'+e.data[o][d]+'" data-dbkey="'+(1==e.tabHeader[l].databaseKey?"S":"N")+'"  scope="'+e.scopeTh+'">'+e.data[o][d]+"</td>",l++}),o++,n+="<td>",n+=' <button type="button" class="btn btn-success btn-sm  add-row"><span style="font-size: 1rem;"><span style="color: white;"><i class="fas fa-plus"></i></span></button>',n+='    <button type="button" class="btn btn-primary btn-sm edit-row"><span style="color: white;"><i class="fas fa-edit"></i></span></span></button> ',n+='    <button type="button" class="btn btn-danger btn-sm delete-row"><span style="color: white;"><i class="fas fa-trash-alt"></i></span></span></button>',n+="</td>",n+="</tr>",l=0}),t(document).on("blur",".inline-field",function(){"S"==t(this).parent().parent().parent().attr("data-mandatory")&&""!=t(this).val()?(t(this).parent().parent().parent().attr("data-value",t(this).val()),t(this).parent().parent().parent().attr("data-change","N"),t(this).parent().parent().parent().attr("data-action","U"),t(this).parent().parent().parent().attr("data-type",t(this).attr("data-type")),t(this).parent().parent().parent().html(t(this).val()),e.tableData.action=t(this).attr("data-action"),e.tableData[r]={colname:t(this).attr("data-colname"),dbkey:t(this).attr("data-dbkey"),value:t(this).val()},r==c?("I"==e.tableData.action?e.onInsert(e.tableData):e.onEdit(e.tableData),r=1):r++):(t(this).addClass("is-invalid"),t(this).focus())}),t(document).on("click",".add-row",function(){var a="";i=0,a+='<tr class="inline-edit" scope="'+e.scopeTr+'">',a+="<td>",a+=' <button type="button" class="btn btn-success btn-sm add-row"><span style="font-size: 1rem;"><span style="color: white;"><i class="fas fa-plus"></i></span></button>',a+='    <button type="button" class="btn btn-primary btn-sm edit-row"><span style="color: white;"><i class="fas fa-edit"></i></span></span></button> ',a+='    <button type="button" class="btn btn-danger btn-sm delete-row"><span style="color: white;"><i class="fas fa-trash-alt"></i></span></span></button>',a+="</td>",t.each(e.tabHeader,function(){d=e.tabHeader[i].columnName,a+='<td class="inline-inp" data-action="I" data-change="N" data-colname="'+d+'" data-inpType="'+e.tabHeader[i].type+'" data-title="'+e.tabHeader[i].columnTitle+'" data-mandatory="'+(1==e.tabHeader[i].mandatory?"S":"N")+'" data-value="" data-dbkey="'+(1==e.tabHeader[i].databaseKey?"S":"N")+'"  scope="'+e.scopeTh+'"></td>',i++}),a+="<td>",a+=' <button type="button" class="btn btn-success btn-sm add-row"><span style="font-size: 1rem;"><span style="color: white;"><i class="fas fa-plus"></i></span></button>',a+='    <button type="button" class="btn btn-primary btn-sm edit-row"><span style="color: white;"><i class="fas fa-edit"></i></span></span></button> ',a+='    <button type="button" class="btn btn-danger btn-sm delete-row"><span style="color: white;"><i class="fas fa-trash-alt"></i></span></span></button>',a+="</td>",a+="</tr>",l++,t(".inline-head").append(a)}),t(document).on("click",".delete-row",function(){var a,n,s=0,i=new Object;t.each(t(this).parent().parent().find(".inline-inp"),function(){a=t(this),i[s]={colname:a.attr("data-colname"),dbkey:a.attr("data-dbkey"),value:a.attr("data-value")},s++,n=t(this).parent()}),e.onDelete(i),n.remove()}),t(document).on("click",".edit-row",function(){r=1,t.each(t(this).parent().parent().find(".inline-inp"),function(){var a="";"N"==t(this).attr("data-change")&&(t(this).attr("data-change","S"),a="select"==t(this).attr("data-inpType")?function(a,e,n,s,i,l,o){var d,r='<div class="form-group"><label></label>';r+='<div id="input-group-prepend"><select  class="custom-select custom-select-sm inline-field"',r+=' data-change="'+s+'"',r+=' data-mandatory="'+n+'"',r+=' data-dbkey="'+e+'"',r+=' data-colname="'+i+'"',r+=' data-action="'+l+'"',r+=' data-type="'+o+'"',r+=">";var c=!1;t.each(a,function(t,a){"S"==a.default?(d='selected="true"',c=!0):d="",r+='<option "'+d+'" value"'+a.value+'">'+a.description+"</option>"}),0==c&&(r+='<option selected="true"></option>');return r+="</select>"}(e.selectValues[t(this).attr("data-colname")],t(this).attr("data-dbkey"),t(this).attr("data-mandatory"),"S",t(this).attr("data-colname"),t(this).attr("data-action"),t(this).attr("data-type")):function(t,a,e,n,s,i,l){var o="";return o+='<div class="form-group"><label></label>',o+='<div id="input-group-prepend"><input aria-describedby="inputGroup-sizing-sm" class="inline-field form-control input-group-sm mb-3"',o+='data-mandatory="'+e+'"',o+='data-dbkey="'+a+'"',o+='data-change="'+n+'"',o+='data-colname="'+s+'"',o+='data-action="'+i+'"',o+='data-type="'+l+'"',o+='value="'+t+'" placeholder="'+s+'"/>',o+="</div></div>"}(t(this).attr("data-value"),t(this).attr("data-dbkey"),t(this).attr("data-mandatory"),"S",t(this).attr("data-colname"),t(this).attr("data-action"),t(this).attr("data-type")),t(this).html(a),a="")})}),t("input").on("keyup",function(){t(this).parent().data("value",t(this).val())}),n+="</table>",this.html(n)}}(jQuery);
